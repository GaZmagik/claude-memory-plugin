# TDD Parity Exclusions
# Paths are relative to PARENT of --src directory (src_dir.parent)
# For --src skills/memory/src → relative to skills/memory/
# For --src hooks/src → relative to hooks/

# =============================================================================
# For --src skills/memory/src: Re-export and type-only files
# =============================================================================

# Re-export index files (no logic to test - only re-export other modules)
src/index.ts
src/types/index.ts
src/think/index.ts
src/bulk/index.ts
src/maintenance/index.ts
src/suggest/index.ts

# Type definition files (no runtime code - TypeScript interfaces/types only)
src/types/api.ts
src/types/operations.ts
src/types/think.ts

# Functions tested in different files (cross-file coverage)
# slugify - tested indirectly via generateSlug in slug.spec.ts
src/core/slug.ts:slugify
# validateMemory - tested in types/memory.spec.ts (6 test cases)
src/core/validation.ts:validateMemory

# Stdin reading functions (require mocking process.stdin which is fragile)
# These read raw input from stdin - testing would require complex stream mocking
src/cli/parser.ts:readStdinJson
src/cli/parser.ts:readStdinRaw

# External CLI invocation (calls Claude CLI binary - untestable without E2E)
# invokeAI spawns a child process running the claude CLI
# getClaudeCliVersion executes claude --version
src/think/ai-invoke.ts:invokeAI
src/think/ai-invoke.ts:getClaudeCliVersion

# AI invocation tests use mock.module() requiring process isolation
# thoughts.ts is already tested in thoughts.spec.ts - this file tests AI path specifically
src/think/thoughts-ai.spec.ts

# =============================================================================
# For --src hooks/src: Constants, types, and mock-tested functions
# =============================================================================

# Constants and types (no runtime logic)
src/core/constants.ts
src/core/types.ts

# Functions tested via isolated mock-heavy test files
# These are actually tested but tdd-parity can't trace vitest mock patterns

# extract-context.ts - tested in extract-context.spec.ts (isolated)
src/session/extract-context.ts:cwdToProjectPath
src/session/extract-context.ts:findSessionJsonl
src/session/extract-context.ts:extractSessionContext
src/session/extract-context.ts:extractContextAsSystemPrompt

# fork-detection.ts - tested in fork-detection.spec.ts (isolated)
src/session/fork-detection.ts:hasClaudeBinary
src/session/fork-detection.ts:getClaudeBinaryPath
src/session/fork-detection.ts:canSpawnForkSession
src/session/fork-detection.ts:spawnForkSession
src/session/fork-detection.ts:createForkLogFile
src/session/fork-detection.ts:writeForkLog
src/session/fork-detection.ts:isForkedSession
src/session/fork-detection.ts:getSessionId

# spawn-session.ts - tested in spawn-session.spec.ts (isolated)
src/session/spawn-session.ts:getLogDir
src/session/spawn-session.ts:getTimestamp
src/session/spawn-session.ts:isMemoryCaptureSession
src/session/spawn-session.ts:spawnSessionWithContext

# semantic-search.ts - NOT fully tested (require ollama mock)
# Other functions in this module ARE tested in semantic-search.spec.ts
# These 3 require mocking the external ollama embed() function:
src/services/semantic-search.ts:getQueryEmbedding
src/services/semantic-search.ts:searchMemories
src/services/semantic-search.ts:logSearchPerformance

# error-handler.ts - runHook calls process.exit() making it untestable
# Other functions in error-handler.ts ARE tested in error-handler.spec.ts
src/core/error-handler.ts:runHook

# errors.ts - class methods tested indirectly
src/core/errors.ts:HookError.toStderr
src/core/errors.ts:HookError.toJSON

# session-cache.ts - class methods tested via session-cache.spec.ts
src/session/session-cache.ts:SessionCache.has
src/session/session-cache.ts:SessionCache.add
src/session/session-cache.ts:SessionCache.cleanup
src/session/session-cache.ts:SessionCache.clear
